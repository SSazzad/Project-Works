(1)
Add product

<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

 <form action="controller/createProduct.php" method="POST" enctype="multipart/form-data">
  <h1> ADD Product</h1>
  <label for="name">Name:</label><br>
  <input type="text" id="name" name="name"><br>
  <label for="bprice">Buying Price:</label><br>
  <input type="text" id="bprice" name="bprice"><br>
  <label for="sprice">Selling Price:</label><br>
  <input type="text" id="sprice" name="sprice"><br>
  <label for="display">Display(0 or 1):</label><br>
  <input type="text" id="display" name="display"><br>
  <input type="submit" name = "createProduct" value="Create">
  <input type="reset"> 
</form> 

</body>
</html>

(2)edit product

<?php 

require_once 'controller/productInfo.php';
$product = fetchStudent($_GET['id']);

 ?>
<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

 <form action="controller/updateProduct.php" method="POST" enctype="multipart/form-data">
 
  <?php
   
  
  ?>
  <h1> Edit Product</h1>
  <label for="name">Name:</label><br>
  <input type="text" id="name" name="name" value="<?php echo $product["name"] ?>"><br>
  <label for="bprice">Buying Price:</label><br>
  <input type="text" id="bprice" name="bprice" value="<?php echo $product["buying_price"] ?>"><br>
  <label for="sprice">Selling Price:</label><br>
  <input type="text" id="sprice" name="sprice" value="<?php echo $product["selling_price"] ?>"><br>
  <label for="display">Display( 0 or 1):</label><br>
  <input type="text" id="display" name="display" value="<?php echo $product["visiablity"] ?>"><br>
  <input type="hidden" name="id" value="<?php echo $product["id"] ?>">
  <input type="submit" name = "updateProduct" value="Update">
  <input type="reset"> 
</form> 

</body>
</html>

(3)
model

<?php 

require_once 'db_connect.php';


function showAllProducts(){
	$conn = db_conn();
    $selectQuery = 'SELECT * FROM `products` ';
    try{
        $stmt = $conn->query($selectQuery);
    }catch(PDOException $e){
        echo $e->getMessage();
    }
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);

   
    
return $rows;
        
   
}

function showStudent($id){
	$conn = db_conn();
	$selectQuery = "SELECT * FROM `products` where ID = ?";

    try {
        $stmt = $conn->prepare($selectQuery);
        $stmt->execute([$id]);
    } catch (PDOException $e) {
        echo $e->getMessage();
    }
    $row = $stmt->fetch(PDO::FETCH_ASSOC);

    return $row;
}


function addProduct($data){
	$conn = db_conn();
    $selectQuery = "INSERT into products (name, buying_price,selling_price, visiablity)
VALUES (:name, :bprice, :sprice, :display)";
    try{
        $stmt = $conn->prepare($selectQuery);
        $stmt->execute([
        	':name' => $data['name'],
        	':bprice' => $data['bprice'],
        	':sprice' => $data['sprice'],
        	':display' => $data['display']
        	
        ]);
    }catch(PDOException $e){
        echo $e->getMessage();
    }
    
    $conn = null;
    return true;
}


function updateProduct($id, $data){
    $conn = db_conn();
    $selectQuery = "UPDATE products set name = ?, buying_price = ?, selling_price = ?, visiablity = ? where ID = ?";
    try{
        $stmt = $conn->prepare($selectQuery);
        $stmt->execute([
        	$data['name'], $data['bprice'], $data['sprice'],$data['display'], $id
        ]);
    }catch(PDOException $e){
        echo $e->getMessage();
    }
    
    $conn = null;
    return true;
}

function deleteProduct($id){
	$conn = db_conn();
    $selectQuery = "DELETE FROM `products` WHERE `ID` = ?";
    try{
        $stmt = $conn->prepare($selectQuery);
        $stmt->execute([$id]);
    }catch(PDOException $e){
        echo $e->getMessage();
    }
    $conn = null;

    return true;
}

(4)
db_connect

<?php 
function db_connect()
{
    $servername = "localhost";
    $username = "root";
    $password = "123456";
    $dbname = "website";

    try {
        $conn = new PDO('mysql:host='.$servername.';dbname='.$dbname.';charset=utf8', $username, $password);
        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $conn->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        // var_dump($conn) ;
    } catch (PDOException $e) {
        echo $e->getMessage();
    }
    return $conn;
}
(5)show all products
<?php  
require_once 'controller/productInfo.php';

$products = fetchAllProduct();


?>
<!DOCTYPE html>
<html>
<head>
	<title> Add Product</title>
	<style type="text/css">
		
		table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
	</style>
</head>
<body>
	<h1> Show All Product</h1>

<table>
	<thead>
		<tr>
			<th>Name</th>
			<th>Buying_Price</th>
			<th>Selling_Price</th>
			<th>Visiablity</th>
			<th>Action</th>
			
		</tr>
	</thead>
	
	<tbody>
		
		<?php foreach ($products as $i => $products): ?>

			
				<tr>
				
				<td><?php echo $products['name'] ?></td>
				<td><?php echo $products['buying_price'] ?></td>
				<td><?php echo $products['selling_price'] ?></td>
				<td><?php echo $products['visiablity'] ?></td>
				<td><a href="editProduct.php?id=<?php echo $products['id'] ?>">Edit</a>&nbsp<a href="controller/deleteProduct.php?id=<?php echo $products['id'] ?>">Delete</a></td>
				
			</tr>
			
		<?php endforeach; ?>
		

	</tbody>
	

</table>


</body>
</html>

(6)
create product

<?php  
require_once '../model.php';


if (isset($_POST['createProduct'])) {
	$data['name'] = $_POST['name'];
	$data['bprice'] = $_POST['bprice'];
	$data['sprice'] = $_POST['sprice'];
	$data['display'] = $_POST['display'];
	
	

  if (addProduct($data)) {
  	echo 'Successfully added!!';
  }
} else {
	echo 'You are not allowed to access this page.';
}

?>
(7)productinfo
<?php 

require_once 'model.php';

function fetchAllProduct(){

	return showAllProducts();

}
(8)<?php  
require_once '../model.php';


if (isset($_POST['updateProduct'])) {
	$data['name'] = $_POST['name'];
  $data['bprice'] = $_POST['buying_price'];
  $data['sprice'] = $_POST['sprice'];
  $data['display'] = $_POST['display'];

  if (updateProduct($_POST['id'], $data)) {
  	echo 'Successfully updated!!';
  	
  	header('Location: ../showAllProduct.php?');
  }
} else {
	echo 'You are not allowed to access this page.';
}


?>
(9)delete product
<?php 

require_once '../model.php';

if (deleteProduct($_GET['id'])) {
    header('Location: ../showAllProducts.php');
}

 ?>
